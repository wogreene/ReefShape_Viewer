<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Reef Viewer</title>

  <!-- OpenLayers CSS -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css"/>

  <!-- Global site CSS -->
  <link rel="stylesheet" href="style.css"/>

  <style>
    /* viewer-page only */
    html, body {
      overflow: hidden;
      background: #000;
    }
    #map {
      width: 100%;
      height: 100%;
      background: #000;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>

<body>

<!-- ------------------ MAP CANVAS ------------------ -->
<div id="map"></div>

<!-- ------------------ TOP UI BAR ------------------ -->
<div class="viewer-ui">

  <a class="back-link" href="./index.html">←</a>

  <button id="zoomOut">−</button>
  <button id="zoomIn">+</button>

  Time:
  <select id="timepointSelect"></select>

</div>

<!-- ------------------ WARNING ICON (mac only) ------------------ -->
<div id="macWarningIcon" class="warning-icon" style="display:none;">
  ⚠️
</div>

<!-- ------------------ WARNING MODAL ------------------ -->
<div id="macWarningModal" class="warning-modal" style="display:none;">
  <div class="warning-box">
    <h2>Rendering Warning</h2>
    <p>
      This map may show flickering artifacts on macOS/iOS
      due to browser WebGL limitations.<br><br>
      Try panning/zooming to refresh tiles, or view from a PC/Android
      for best performance.
    </p>
    <button id="macWarningClose">Close</button>
  </div>
</div>

<!-- ------------------ JAVASCRIPT ------------------ -->
<script type="module" src="js/viewer-ol.js"></script>

<script>
/* Platform detect → show icon only on macOS/iOS */
const isMac = /Macintosh|Mac OS X/i.test(navigator.userAgent);
const isIOS = /iPad|iPhone|iPod/i.test(navigator.userAgent);

if (isMac || isIOS) {
  document.getElementById("macWarningIcon").style.display = "block";
}

/* Modal behavior */
document.getElementById("macWarningIcon").onclick = () => {
  document.getElementById("macWarningModal").style.display = "flex";
};

document.getElementById("macWarningClose").onclick = () => {
  document.getElementById("macWarningModal").style.display = "none";
};
</script>

</body>
</html>
